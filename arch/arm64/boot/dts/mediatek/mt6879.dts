// SPDX-License-Identifier: (GPL-2.0 OR MIT)
/*
 * Copyright (C) 2021 MediaTek Inc.
 */

/dts-v1/;
#include <dt-bindings/interrupt-controller/arm-gic.h>
#include <dt-bindings/interrupt-controller/irq.h>
#include <dt-bindings/phy/phy.h>

/ {
	model = "MT6879";
	compatible = "mediatek,MT6879";
	interrupt-parent = <&gic>;
	#address-cells = <2>;
	#size-cells = <2>;

	aliases {
		i2c0 = &i2c0;
		i2c1 = &i2c1;
		i2c2 = &i2c2;
		i2c3 = &i2c3;
		i2c4 = &i2c4;
		i2c5 = &i2c5;
		i2c6 = &i2c6;
		i2c7 = &i2c7;
		i2c8 = &i2c8;
		i2c9 = &i2c9;
		i2c10 = &i2c10;
		i2c11 = &i2c11;
	};

	i2c0: i2c@11e00000 {
		compatible = "mediatek,mt6879-i2c";
		reg = <0 0x11e00000 0 0x1000>,
			<0 0x11300080 0 0x80>;
		/* interrupts = <GIC_SPI 100 IRQ_TYPE_LEVEL_HIGH 0>; */
		/* clocks = <&imp_iic_wrap_e_clk CLK_IMPE_AP_I2C0_RO>, */
			/* <&infracfg_ao_clk CLK_IFRAO_APDMA>; */
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	i2c1: i2c@11e01000 {
		compatible = "mediatek,mt6879-i2c";
		reg = <0 0x11e01000 0 0x1000>,
			<0 0x11300100 0 0x80>;
		/* interrupts = <GIC_SPI 100 IRQ_TYPE_LEVEL_HIGH 0>; */
		/* clocks = <&imp_iic_wrap_e_clk CLK_IMPE_AP_I2C1_RO>, */
			/* <&infracfg_ao_clk CLK_IFRAO_APDMA>; */
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	i2c2: i2c@11cb0000 {
		compatible = "mediatek,mt6879-i2c";
		reg = <0 0x11cb0000 0 0x1000>,
			<0 0x11300180 0 0x100>;
		/* interrupts = <GIC_SPI 100 IRQ_TYPE_LEVEL_HIGH 0>; */
		/* clocks = <&imp_iic_wrap_e_clk CLK_IMPE_AP_I2C2_RO>, */
			/* <&infracfg_ao_clk CLK_IFRAO_APDMA>; */
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	i2c3: i2c@11ed0000 {
		compatible = "mediatek,mt6879-i2c";
		reg = <0 0x11ed0000 0 0x1000>,
			<0 0x11300280 0 0x80>;
		/* interrupts = <GIC_SPI 100 IRQ_TYPE_LEVEL_HIGH 0>; */
		/* clocks = <&imp_iic_wrap_e_clk CLK_IMPE_AP_I2C3_RO>, */
			/* <&infracfg_ao_clk CLK_IFRAO_APDMA>; */
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	i2c4: i2c@11cb1000 {
		compatible = "mediatek,mt6879-i2c";
		reg = <0 0x11cb1000 0 0x1000>,
			<0 0x11300300 0 0x100>;
		/* interrupts = <GIC_SPI 100 IRQ_TYPE_LEVEL_HIGH 0>; */
		/* clocks = <&imp_iic_wrap_e_clk CLK_IMPE_AP_I2C4_RO>, */
			/* <&infracfg_ao_clk CLK_IFRAO_APDMA>; */
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	i2c5: i2c@11ed1000 {
		compatible = "mediatek,mt6879-i2c";
		reg = <0 0x11ed1000 0 0x1000>,
			<0 0x11300400 0 0x80>;
		/* interrupts = <GIC_SPI 100 IRQ_TYPE_LEVEL_HIGH 0>; */
		/* clocks = <&imp_iic_wrap_e_clk CLK_IMPE_AP_I2C5_RO>, */
			/* <&infracfg_ao_clk CLK_IFRAO_APDMA>; */
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	i2c6: i2c@11e02000 {
		compatible = "mediatek,mt6879-i2c";
		reg = <0 0x11e02000 0 0x1000>,
			<0 0x11300480 0 0x80>;
		/* interrupts = <GIC_SPI 100 IRQ_TYPE_LEVEL_HIGH 0>; */
		/* clocks = <&imp_iic_wrap_e_clk CLK_IMPE_AP_I2C6_RO>, */
			/* <&infracfg_ao_clk CLK_IFRAO_APDMA>; */
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	i2c7: i2c@11ed2000 {
		compatible = "mediatek,mt6879-i2c";
		reg = <0 0x11ed2000 0 0x1000>,
			<0 0x11300500 0 0x100>;
		/* interrupts = <GIC_SPI 100 IRQ_TYPE_LEVEL_HIGH 0>; */
		/* clocks = <&imp_iic_wrap_e_clk CLK_IMPE_AP_I2C7_RO>, */
			/* <&infracfg_ao_clk CLK_IFRAO_APDMA>; */
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	i2c8: i2c@11ed3000 {
		compatible = "mediatek,mt6879-i2c";
		reg = <0 0x11ed3000 0 0x1000>,
			<0 0x11300600 0 0x100>;
		/* interrupts = <GIC_SPI 100 IRQ_TYPE_LEVEL_HIGH 0>; */
		/* clocks = <&imp_iic_wrap_e_clk CLK_IMPE_AP_I2C8_RO>, */
			/* <&infracfg_ao_clk CLK_IFRAO_APDMA>; */
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	i2c9: i2c@11cb2000 {
		compatible = "mediatek,mt6879-i2c";
		reg = <0 0x11cb2000 0 0x1000>,
			<0 0x11300700 0 0x100>;
		/* interrupts = <GIC_SPI 100 IRQ_TYPE_LEVEL_HIGH 0>; */
		/* clocks = <&imp_iic_wrap_e_clk CLK_IMPE_AP_I2C9_RO>, */
			/* <&infracfg_ao_clk CLK_IFRAO_APDMA>; */
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	i2c10: i2c@11280000 {
		compatible = "mediatek,mt6879-i2c";
		reg = <0 0x11280000 0 0x1000>,
			<0 0x11300800 0 0x80>;
		/* interrupts = <GIC_SPI 100 IRQ_TYPE_LEVEL_HIGH 0>; */
		/* clocks = <&imp_iic_wrap_e_clk CLK_IMPE_AP_I2C10_RO>, */
			/* <&infracfg_ao_clk CLK_IFRAO_APDMA>; */
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	i2c11: i2c@11281000 {
		compatible = "mediatek,mt6879-i2c";
		reg = <0 0x11281000 0 0x1000>,
			<0 0x11300880 0 0x80>;
		/* interrupts = <GIC_SPI 100 IRQ_TYPE_LEVEL_HIGH 0>; */
		/* clocks = <&imp_iic_wrap_e_clk CLK_IMPE_AP_I2C11_RO>, */
			/* <&infracfg_ao_clk CLK_IFRAO_APDMA>; */
		clock-names = "main", "dma";
		clock-div = <1>;
	};

	/* chosen */
	chosen: chosen {
		bootargs = "console=tty0 console=ttyS0,921600n1 root=/dev/ram \
			vmalloc=400M slub_debug=OFZPU swiotlb=noforce \
			firmware_class.path=/vendor/firmware \
			page_owner=on";
	};

	cpus {
	};

	memory {
		device_type = "memory";
		reg = <0 0x40000000 0 0x3e605000>;
	};

	reserved_memory: reserved-memory {
		#address-cells = <2>;
		#size-cells = <2>;
		ranges;
	};

	gic: interrupt-controller {
		compatible = "arm,gic-v3";
		#interrupt-cells = <3>;
		#address-cells = <2>;
		#size-cells = <2>;
		#redistributor-regions = <1>;
		interrupt-parent = <&gic>;
		interrupt-controller;
		reg = <0 0x0c000000 0 0x40000>, // distributor
		      <0 0x0c040000 0 0x200000>; // redistributor
		interrupts = <GIC_PPI 9 IRQ_TYPE_LEVEL_HIGH>;
	};

	timer: timer {
		compatible = "arm,armv8-timer";
		interrupt-parent = <&gic>;
		interrupts = <GIC_PPI 13 IRQ_TYPE_LEVEL_HIGH>,
			<GIC_PPI 14 IRQ_TYPE_LEVEL_HIGH>,
			<GIC_PPI 11 IRQ_TYPE_LEVEL_HIGH>,
			<GIC_PPI 10 IRQ_TYPE_LEVEL_HIGH>;
		clock-frequency = <13000000>;
	};

	apdma: dma-controller@11300900 {
		compatible = "mediatek,mt6779-uart-dma";
		reg = <0 0x11300900 0 0x80>,
		      <0 0x11300980 0 0x80>,
		      <0 0x11300a00 0 0x80>,
		      <0 0x11300a80 0 0x80>;
		interrupts = <GIC_SPI 175 IRQ_TYPE_LEVEL_HIGH>,
			     <GIC_SPI 176 IRQ_TYPE_LEVEL_HIGH>,
			     <GIC_SPI 177 IRQ_TYPE_LEVEL_HIGH>,
			     <GIC_SPI 178 IRQ_TYPE_LEVEL_HIGH>;
	};

	apuart0: serial@11001000 {
		compatible = "mediatek,mt6577-uart";
		reg = <0 0x11001000 0 0x1000>;
		interrupts = <GIC_SPI 141 IRQ_TYPE_LEVEL_HIGH>;
		dmas = <&apdma 0
				&apdma 1>;
		dma-names = "tx", "rx";
	};

	apuart1: serial@11002000 {
		compatible = "mediatek,mt6577-uart";
		reg = <0 0x11002000 0 0x1000>;
		interrupts = <GIC_SPI 142 IRQ_TYPE_LEVEL_HIGH>;
		dmas = <&apdma 2
				&apdma 3>;
		dma-names = "tx", "rx";
	};

	odm: odm {
		compatible = "simple-bus";
		/* reserved for overlay by odm */
	};

	ssusb: usb0@11201000 {
		compatible = "mediatek,mtu3";
		reg = <0 0x11201000 0 0x2e00>,
			<0 0x11203e00 0 0x0100>;
		reg-names = "mac", "ippc";
		interrupts = <GIC_SPI 128 IRQ_TYPE_LEVEL_HIGH 0>;
		phy-cells = <1>;
		phys = <&u2port0 PHY_TYPE_USB2>,
			 <&u3port0 PHY_TYPE_USB3>;
		#address-cells = <2>;
		#size-cells = <2>;
		ranges;
		dr_mode = "otg";
		maximum-speed = "high-speed";
		mediatek,force-vbus;
		mediatek,clk-mgr;
		mediatek,usb3-drd;
		usb-role-switch;
	};

	u3phy: usb0-phy@11e40000 {
		compatible = "mediatek,generic-tphy-v2";
		#address-cells = <2>;
		#size-cells = <2>;
		ranges;

		u2port0: usb2-phy0@11e40000 {
			reg = <0 0x11e40000 0 0x700>;
			#phy-cells = <1>;
		};

		u3port0: usb3-phy0@11e40700 {
			reg = <0 0x11e40700 0 0x900>;
			#phy-cells = <1>;
		};
	};

	u3fpgaphy: usb-phy {
		compatible = "mediatek,fpga-u3phy";
		mediatek,ippc = <0x11203e00>;
		#address-cells = <2>;
		#size-cells = <2>;
		fpga_i2c_physical_base = <0x11cb0000>;
		status = "disabled";

		u3fpgaport0: usb-phy@0 {
			chip-id= <0xa60931a>;
			port = <0>;
			pclk_phase = <23>;
			#phy-cells = <1>;
		};
	};

	mmc0: mmc@11230000 {
		compatible = "mediatek,mt6879-mmc", "mediatek,mt2712-mmc";
		reg = <0 0x11230000 0 0x10000>,
		      <0 0x11f50000 0 0x1000>;
		interrupts = <GIC_SPI 99 IRQ_TYPE_LEVEL_HIGH 0>;
	};

	mmc1: mmc@11240000 {
		compatible = "mediatek,mt6879-mmc", "mediatek,mt2712-mmc";
		reg = <0 0x11240000 0 0x1000>,
		      <0 0x11e10000 0 0x1000>;
		interrupts = <GIC_SPI 103 IRQ_TYPE_LEVEL_HIGH 0>;
#if 0
		clocks = <&topckgen_clk CLK_TOP_MSDC30_1_SEL>,
			 <&infracfg_ao_clk CLK_IFRAO_MSDC1>,
			 <&infracfg_ao_clk CLK_IFRAO_MSDC1_SRC>;
		clock-names = "source", "hclk", "source_cg";
#endif
	};

	pmu {
		compatible = "arm,dsu-pmu";
		interrupt-parent = <&gic>;
		interrupts = <GIC_PPI 7 IRQ_TYPE_LEVEL_HIGH>;
	};

	drm: drm@1000d000 {
		compatible = "mediatek,dbgtop-drm";
		reg = <0 0x1000d000 0 0x1000>;
		status = "disabled";
	};
};

#include "mediatek/cust_mt6879_msdc.dtsi"
